# -*- coding: utf-8 -*-
import sys
sys.stdout.reconfigure(encoding='utf-8')

from openai import OpenAI

client = OpenAI(api_key='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')

prompt = '''당신은 Destiny Fusion Matrix 전문가입니다.
가장 중요한 건 **교차 분석(Cross Analysis)**입니다!
사주와 점성술이 **같은 특징을 다른 방식으로 말해줄 때** 그게 진실입니다.

═══════════════════════════════════════════════════════════════
            DESTINY FUSION MATRIX™ 10-LAYER 분석 데이터
═══════════════════════════════════════════════════════════════

【Layer 1-4: 사주】
일간: 갑목 (큰 나무, 성장형)
격국: 식신격 (창의력/표현력)
식신 2개, 정관 2개, 편인 1개
목 35%(과다), 화 20%, 토 15%(부족), 금 10%(부족), 수 20%
신살: 도화살(매력), 역마살(변화), 문창귀인(글)

【Layer 5-8: 타이밍】
대운 경오 (금극목 시련기)
세운 병오년 (목생화, 표현의 해)
월운 기축월 (목극토, 주도권)
일진 계묘일 (수생목, 아이디어 폭발)

【Layer 9-10: 점성술】
태양 황소자리 25도 (안정, 감각)
달 물병자리 12도 (독립, 혁신)
수성 쌍둥이자리 8도 (말빠름, 재치)
금성 양자리 18도 (직진형 사랑)
화성 사자자리 22도 (자존심, 리더십)
상승궁 쌍둥이자리 (첫인상 밝음)
MC 물고기자리 (창의적 커리어)

오늘 트랜싯:
금성-목성 트라인 (인간관계)
화성-태양 섹스타일 (행동력)
달 천칭자리 (소통)

═══════════════════════════════════════════════════════════════

## 작성 규칙

1. 리스트/점수/이모지 금지
2. 친구한테 말하듯 자연스럽게
3. **교차 분석 필수**: 모든 특징마다 사주+점성술 둘 다 언급하고 "둘 다 ~를 말하니" 형식으로 결론
4. 1200~1500자
5. 모든 10개 레이어 데이터를 자연스럽게 녹여서

## 리포트 주제: 오늘의 운세 (2026년 1월 21일)

오늘을 한마디로 표현하면서 시작. 사주로 보면 일진과 일간의 관계를 먼저 설명하고, 점성술로 보면 오늘의 행성 배치를 이어서 설명. 둘이 어떻게 교차 확인되는지 명확히 제시.

시간대별 에너지 흐름을 설명할 때도 사주의 시진 분석과 점성술의 달 이동을 함께 언급. 오전은 어떻고 오후는 어떤지. 사주와 점성술이 둘 다 같은 시간대를 좋게/나쁘게 보는 경우 강조.

기회 포인트는 사주의 십신과 점성술의 행성을 연결. "사주로는 식신의 창의력이 발동하는데, 점성술로도 수성이 순행이라 소통이 술술 풀려. 둘 다 표현력을 말하니 오늘 확실히 말발이 선다"처럼.

주의할 점도 마찬가지로 융합. 오행 밸런스와 행성 배치를 함께. 둘 다 같은 영역을 경고하면 정말 조심해야 함을 강조.

영역별로는 career/love/wealth/health를 각각 3-4문장씩, 사주+점성술 융합. 각 영역마다 교차 분석 포인트 최소 1개 이상 포함.

마지막에 오늘의 핵심 메시지를 여운 있게. 사주와 점성술이 공통으로 말하는 가장 중요한 포인트로 마무리.
'''

print("=" * 80)
print("🌟 교차 분석 일간 리포트 생성 중...")
print("=" * 80)
print()

response = client.chat.completions.create(
    model='gpt-4o',
    messages=[{'role': 'user', 'content': prompt}],
    max_tokens=2500,
    temperature=0.8
)

result = response.choices[0].message.content

print(result)
print()
print("=" * 80)
print(f"📊 글자 수: {len(result)}자")
print("=" * 80)
