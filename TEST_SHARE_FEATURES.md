# 공유 기능 테스트 가이드

## 🚀 빠른 시작

### 1. 개발 서버 실행
```bash
npm run dev
```
서버가 http://localhost:3000 에서 실행됩니다.

---

## 📋 테스트 체크리스트

### ✅ 궁합(Compatibility) 서비스 공유 기능 테스트

#### A. 기본 궁합 분석 페이지
1. **페이지 이동**
   - 브라우저에서 http://localhost:3000/compatibility 접속

2. **궁합 분석 실행**
   - Person 1 정보 입력:
     - 이름: Alice
     - 생년월일: 1995-05-15
     - 출생 시간: 14:30
     - 도시: Seoul, KR
   - Person 2 정보 입력:
     - 이름: Bob
     - 생년월일: 1993-08-20
     - 출생 시간: 09:15
     - 도시: Seoul, KR
     - 관계: Lover
   - "Analyze Compatibility" 버튼 클릭

3. **공유 버튼 확인**
   - ✅ 결과 페이지 하단에 "Share Result" 버튼이 보이는지 확인
   - ✅ 버튼에 공유 아이콘이 있는지 확인
   - ✅ 버튼 스타일이 올바르게 적용되었는지 확인

4. **공유 기능 테스트**
   - "Share Result" 버튼 클릭
   - **예상 동작**:
     - 모바일: 네이티브 공유 시트가 열림
     - 데스크톱: 이미지 자동 다운로드 + 클립보드에 링크 복사
   - ✅ 이미지 파일명: `compatibility-result.png`
   - ✅ 토스트 메시지: "Image saved! Link copied to clipboard."

5. **생성된 이미지 확인**
   - 다운로드된 이미지 열기
   - **확인 사항**:
     - ✅ 배경: 우주 테마 (어두운 그라데이션)
     - ✅ 별 효과가 있는지
     - ✅ "Alice" 이름 표시
     - ✅ "&" 기호
     - ✅ "Bob" 이름 표시
     - ✅ 궁합 점수 원형 차트
     - ✅ 관계 이모지 (💕)
     - ✅ 하단 브랜딩: "DestinyPal.me"

#### B. 궁합 인사이트 페이지
1. **인사이트 페이지 이동**
   - 궁합 분석 결과 페이지에서 "상세 분석 보기" 버튼 클릭
   - 또는 직접 URL: http://localhost:3000/compatibility/insights?persons=...

2. **공유 버튼 확인**
   - ✅ 페이지 하단에 "결과 공유하기" 버튼 확인
   - ✅ 버튼 스타일 확인

3. **공유 기능 테스트**
   - "결과 공유하기" 버튼 클릭
   - 이미지 다운로드 확인
   - ✅ 파일명: `compatibility-insights.png`

4. **생성된 이미지 확인**
   - **확인 사항**:
     - ✅ 두 사람 이름 표시
     - ✅ 궁합 점수 표시
     - ✅ 주요 특징 (highlights) 표시
     - ✅ 관계 이모지
     - ✅ 브랜딩 정보

---

### ✅ 데스티니 매치(Destiny Match) 서비스 공유 기능 테스트

#### A. 매치 목록 페이지

**⚠️ 사전 준비**
- 로그인 필요
- 프로필 설정 완료 필요
- 최소 1개 이상의 매치 필요

1. **페이지 이동**
   - http://localhost:3000/destiny-match/matches 접속
   - 로그인하지 않았다면 로그인

2. **매치 확인**
   - ✅ 매치 목록이 표시되는지 확인
   - ✅ 각 매치의 궁합 점수가 있는지 확인

3. **공유 버튼 확인**
   - ✅ 매치 목록 상단에 "🌟 공유하기" 버튼 확인
   - ✅ 버튼이 중앙 정렬되어 있는지 확인
   - ✅ 버튼 스타일 확인 (그라데이션 배경, 글로우 효과)

4. **공유 기능 테스트**
   - "🌟 공유하기" 버튼 클릭
   - **예상 동작**:
     - 이미지 생성 중 로딩 표시
     - 생성 완료 후 공유/다운로드
   - ✅ 파일명: `destiny-match-result.png`

5. **생성된 이미지 확인**
   - **확인 사항**:
     - ✅ 제목: "🌟 Destiny Match"
     - ✅ 사용자 이름 표시
     - ✅ 매치 개수 (큰 숫자로 표시)
     - ✅ "Matches Found" 또는 "Match Found" 텍스트
     - ✅ 최고 매치 이름 및 점수
     - ✅ 궁합 점수 원형 차트
     - ✅ 우주 프로필 (별자리, 사주 원소) - 있는 경우
     - ✅ 브랜딩: "destinypal.me/destiny-match"

6. **엣지 케이스 테스트**
   - 매치가 1개일 때: "1 Match Found" 표시 확인
   - 매치가 여러 개일 때: 최고 점수 매치가 선택되는지 확인

---

## 🎨 시각적 품질 검증

### 카드 디자인 체크포인트

#### 색상 & 그라데이션
- ✅ 배경이 어두운 우주 테마인지 (검은색 → 남색)
- ✅ 텍스트가 밝은 색상으로 잘 보이는지 (#EAE6FF)
- ✅ 그라데이션이 부드럽게 적용되었는지
- ✅ 점수 원형 차트의 색상 (Cyan → Purple → Pink)

#### 타이포그래피
- ✅ 폰트 크기가 적절한지
- ✅ 텍스트가 잘림 없이 표시되는지
- ✅ 이모지가 올바르게 표시되는지
- ✅ 텍스트 정렬이 올바른지 (중앙, 좌측 등)

#### 레이아웃
- ✅ 요소들이 균형있게 배치되었는지
- ✅ 여백이 적절한지
- ✅ 원형 차트가 정확한 위치에 있는지
- ✅ 브랜딩 텍스트가 하단에 있는지

#### 특수 효과
- ✅ 별 효과가 보이는지 (작은 점들)
- ✅ 글로우 효과가 적용되었는지
- ✅ 원형 차트의 프로그레스가 정확한지

---

## 🧪 브라우저별 테스트

### 데스크톱
- ✅ Chrome: 이미지 다운로드
- ✅ Firefox: 이미지 다운로드
- ✅ Safari: 이미지 다운로드
- ✅ Edge: 이미지 다운로드

### 모바일
- ✅ iOS Safari: 네이티브 공유 시트
- ✅ Android Chrome: 네이티브 공유 시트
- ✅ Samsung Internet: 네이티브 공유 시트

---

## 🔍 개발자 도구 테스트

### 콘솔 오류 확인
1. 브라우저 개발자 도구 열기 (F12)
2. Console 탭 확인
3. 공유 버튼 클릭
4. **확인 사항**:
   - ✅ 오류 메시지가 없는지
   - ✅ Canvas 관련 경고가 없는지
   - ✅ 네트워크 요청이 성공하는지

### 네트워크 탭 확인
1. Network 탭 열기
2. 공유 버튼 클릭
3. **확인 사항**:
   - ✅ Blob URL 생성 확인
   - ✅ 이미지 다운로드 요청 확인

---

## 🐛 일반적인 문제 해결

### 문제: 공유 버튼이 보이지 않음
- **원인**: 컴포넌트 import 누락
- **해결**:
  ```typescript
  import ShareButton from '@/components/share/ShareButton';
  import { generateDestinyMatchCard } from '@/components/share/cards/DestinyMatchCard';
  ```

### 문제: 이미지가 생성되지 않음
- **원인**: Canvas API 미지원 브라우저
- **해결**: 최신 브라우저 사용 (Chrome, Firefox, Safari, Edge)

### 문제: 이미지가 비어있음
- **원인**: Canvas 그리기 로직 오류
- **해결**:
  1. 브라우저 콘솔 확인
  2. `test-share-cards.html` 테스트
  3. Canvas API 지원 확인

### 문제: 타입스크립트 오류
- **원인**: 타입 정의 누락
- **해결**:
  ```bash
  npm run type-check
  ```

### 문제: 빌드 실패
- **원인**: Prisma 스키마 문제 (matchMessage 모델 누락)
- **해결**: 개발 모드 사용 (`npm run dev`)

---

## 📸 스크린샷 가이드

### 테스트 완료 후 확인할 스크린샷
1. **궁합 분석 결과 페이지**
   - 공유 버튼이 보이는 화면
   - 생성된 카드 이미지

2. **궁합 인사이트 페이지**
   - 공유 버튼이 보이는 화면
   - 생성된 카드 이미지

3. **데스티니 매치 목록 페이지**
   - 공유 버튼이 보이는 화면
   - 생성된 카드 이미지

4. **모바일 공유 시트** (iOS/Android)
   - 네이티브 공유 UI 화면

---

## ✅ 최종 검증

### 모든 항목이 체크되었는지 확인
- [ ] 궁합 분석 페이지 공유 버튼 작동
- [ ] 궁합 인사이트 페이지 공유 버튼 작동
- [ ] 데스티니 매치 페이지 공유 버튼 작동
- [ ] 모든 이미지가 올바르게 생성됨
- [ ] 콘솔 오류 없음
- [ ] 모바일에서 네이티브 공유 작동
- [ ] 데스크톱에서 이미지 다운로드 작동

---

## 🎯 성능 메트릭

### 측정할 항목
- **이미지 생성 시간**: 버튼 클릭부터 다운로드까지
  - 목표: < 2초
- **이미지 파일 크기**:
  - OG (1200x630): ~100-200KB
  - Story (1080x1920): ~150-300KB
- **메모리 사용량**: Canvas 생성 시
  - 목표: < 50MB 증가

---

## 🔧 테스트 자동화 (선택사항)

### 간단한 HTML 테스트 파일 사용
```bash
# 테스트 파일 생성
node scripts/test-share-cards.js

# 브라우저에서 열기
open test-share-cards.html  # macOS
start test-share-cards.html  # Windows
```

### 수동 테스트 체크리스트
1. ✅ Destiny Match Card (OG) 생성
2. ✅ Destiny Match Card (Story) 생성
3. ✅ Compatibility Card (OG) 생성
4. ✅ Compatibility Card (Story) 생성

---

## 📝 버그 리포트 템플릿

문제를 발견하면 아래 형식으로 기록하세요:

```markdown
### 버그 제목
[간단한 버그 설명]

**재현 방법**:
1. [단계 1]
2. [단계 2]
3. [단계 3]

**예상 동작**:
[예상했던 결과]

**실제 동작**:
[실제로 발생한 결과]

**환경**:
- 브라우저: [Chrome/Firefox/Safari/Edge]
- 버전: [버전 번호]
- OS: [Windows/macOS/Linux/iOS/Android]

**스크린샷**:
[스크린샷 첨부]

**콘솔 오류**:
\`\`\`
[콘솔 오류 메시지]
\`\`\`
```

---

## 🎉 테스트 완료!

모든 테스트를 통과했다면 축하합니다! 🎊

공유 기능이 성공적으로 구현되었습니다.

**다음 단계**:
1. 프로덕션 배포 전 최종 검토
2. 사용자 피드백 수집
3. 추가 개선사항 논의

---

**문서 버전**: 1.0
**마지막 업데이트**: 2026-01-05
**작성자**: Claude Code
